import{d as e,a as t,m as a,b as o,c as l,M as n,f as r,s,o as i,g as u,w as d,h as c,n as p,j as f,x as h,y as m,i as y,l as g,z as _,r as x,E as b,F as v,q as C,e as S,p as k,a0 as w,G as B,S as I,Z as P,X as $,K as F,W as T,$ as E,a1 as O,a2 as N,a3 as j,a4 as z,O as V,k as H,a5 as D,a6 as K}from"./index-7bbc1dea.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as U,b as A,c as R,d as L,e as q}from"./u-popup.d3edddaa.js";import{_ as G}from"./AutoHeight.636907b5.js";const M=W({name:"u-line-progress",mixins:[a,o,e({props:{activeColor:{type:String,default:()=>t.lineProgress.activeColor},inactiveColor:{type:String,default:()=>t.lineProgress.color},percentage:{type:[String,Number],default:()=>t.lineProgress.inactiveColor},showText:{type:Boolean,default:()=>t.lineProgress.showText},height:{type:[String,Number],default:()=>t.lineProgress.height}}})],data:()=>({lineWidth:0}),watch:{percentage(e){this.resizeProgressWidth()}},computed:{progressStyle(){let e={};return e.width=this.lineWidth,e.backgroundColor=this.activeColor,e.height=l(this.height),e},innserPercentage(){return n(0,100,this.percentage)}},mounted(){this.init()},methods:{addStyle:r,addUnit:l,init(){s(20).then((()=>{this.resizeProgressWidth()}))},getProgressWidth(){return this.$uGetRect(".u-line-progress__background")},resizeProgressWidth(){this.getProgressWidth().then((e=>{const{width:t}=e;this.lineWidth=t*this.innserPercentage/100+"px"}))}}},[["render",function(e,t,a,o,l,n){const r=g,s=_;return i(),u(r,{class:"u-line-progress",style:p([n.addStyle(e.customStyle)])},{default:d((()=>[c(r,{class:"u-line-progress__background",ref:"u-line-progress__background",style:p([{backgroundColor:e.inactiveColor,height:n.addUnit(e.height)}])},null,8,["style"]),c(r,{class:"u-line-progress__line",style:p([n.progressStyle])},{default:d((()=>[f(e.$slots,"default",{},(()=>[e.showText&&e.percentage>=10?(i(),u(s,{key:0,class:"u-line-progress__text"},{default:d((()=>[h(m(n.innserPercentage+"%"),1)])),_:1})):y("v-if",!0)]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-4a20372c"]]);const X=W({name:"u-modal",mixins:[a,o,e({props:{show:{type:Boolean,default:()=>t.modal.show},title:{type:[String],default:()=>t.modal.title},content:{type:String,default:()=>t.modal.content},confirmText:{type:String,default:()=>t.modal.confirmText},cancelText:{type:String,default:()=>t.modal.cancelText},showConfirmButton:{type:Boolean,default:()=>t.modal.showConfirmButton},showCancelButton:{type:Boolean,default:()=>t.modal.showCancelButton},confirmColor:{type:String,default:()=>t.modal.confirmColor},cancelColor:{type:String,default:()=>t.modal.cancelColor},buttonReverse:{type:Boolean,default:()=>t.modal.buttonReverse},zoom:{type:Boolean,default:()=>t.modal.zoom},asyncClose:{type:Boolean,default:()=>t.modal.asyncClose},closeOnClickOverlay:{type:Boolean,default:()=>t.modal.closeOnClickOverlay},negativeTop:{type:[String,Number],default:()=>t.modal.negativeTop},width:{type:[String,Number],default:()=>t.modal.width},confirmButtonShape:{type:String,default:()=>t.modal.confirmButtonShape}}})],data:()=>({loading:!1}),watch:{show(e){e&&this.loading&&(this.loading=!1)}},emits:["confirm","cancel","close"],methods:{addUnit:l,confirmHandler(){this.asyncClose&&(this.loading=!0),this.$emit("confirm")},cancelHandler(){this.$emit("cancel")},clickHandler(){this.closeOnClickOverlay&&this.$emit("close")}}},[["render",function(e,t,a,o,l,n){const r=_,s=g,S=U(x("u-line"),A),k=U(x("u-loading-icon"),R),w=U(x("u-popup"),L);return i(),u(w,{mode:"center",zoom:e.zoom,show:e.show,class:C([e.customClass]),customStyle:{borderRadius:"6px",overflow:"hidden",marginTop:`-${n.addUnit(e.negativeTop)}`},closeOnClickOverlay:e.closeOnClickOverlay,safeAreaInsetBottom:!1,duration:400,onClick:n.clickHandler},{default:d((()=>[c(s,{class:"u-modal",style:p({width:n.addUnit(e.width)})},{default:d((()=>[e.title?(i(),u(r,{key:0,class:"u-modal__title"},{default:d((()=>[h(m(e.title),1)])),_:1})):y("v-if",!0),c(s,{class:"u-modal__content",style:p({paddingTop:(e.title?12:25)+"px"})},{default:d((()=>[f(e.$slots,"default",{},(()=>[c(r,{class:"u-modal__content__text"},{default:d((()=>[h(m(e.content),1)])),_:1})]),!0)])),_:3},8,["style"]),e.$slots.confirmButton?(i(),u(s,{key:1,class:"u-modal__button-group--confirm-button"},{default:d((()=>[f(e.$slots,"confirmButton",{},void 0,!0)])),_:3})):(i(),b(v,{key:2},[c(S),c(s,{class:"u-modal__button-group",style:p({flexDirection:e.buttonReverse?"row-reverse":"row"})},{default:d((()=>[e.showCancelButton?(i(),u(s,{key:0,class:C(["u-modal__button-group__wrapper u-modal__button-group__wrapper--cancel",[e.showCancelButton&&!e.showConfirmButton&&"u-modal__button-group__wrapper--only-cancel"]]),"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover",onClick:n.cancelHandler},{default:d((()=>[c(r,{class:"u-modal__button-group__wrapper__text",style:p({color:e.cancelColor})},{default:d((()=>[h(m(e.cancelText),1)])),_:1},8,["style"])])),_:1},8,["class","onClick"])):y("v-if",!0),e.showConfirmButton&&e.showCancelButton?(i(),u(S,{key:1,direction:"column"})):y("v-if",!0),e.showConfirmButton?(i(),u(s,{key:2,class:C(["u-modal__button-group__wrapper u-modal__button-group__wrapper--confirm",[!e.showCancelButton&&e.showConfirmButton&&"u-modal__button-group__wrapper--only-confirm"]]),"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover",onClick:n.confirmHandler},{default:d((()=>[l.loading?(i(),u(k,{key:0})):(i(),u(r,{key:1,class:"u-modal__button-group__wrapper__text",style:p({color:e.confirmColor})},{default:d((()=>[h(m(e.confirmText),1)])),_:1},8,["style"]))])),_:1},8,["class","onClick"])):y("v-if",!0)])),_:1},8,["style"])],64))])),_:3},8,["style"])])),_:3},8,["zoom","show","class","customStyle","closeOnClickOverlay","onClick"])}],["__scopeId","data-v-8d548a8a"]]);const Z=W({name:"u-textarea",mixins:[a,o,e({props:{value:{type:[String,Number],default:()=>t.textarea.value},modelValue:{type:[String,Number],default:()=>t.textarea.value},placeholder:{type:[String,Number],default:()=>t.textarea.placeholder},placeholderClass:{type:String,default:()=>t.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>t.input.placeholderStyle},height:{type:[String,Number],default:()=>t.textarea.height},confirmType:{type:String,default:()=>t.textarea.confirmType},disabled:{type:Boolean,default:()=>t.textarea.disabled},count:{type:Boolean,default:()=>t.textarea.count},focus:{type:Boolean,default:()=>t.textarea.focus},autoHeight:{type:Boolean,default:()=>t.textarea.autoHeight},fixed:{type:Boolean,default:()=>t.textarea.fixed},cursorSpacing:{type:Number,default:()=>t.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>t.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>t.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>t.textarea.selectionStart},selectionEnd:{type:Number,default:()=>t.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>t.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>t.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>t.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>t.textarea.maxlength},border:{type:String,default:()=>t.textarea.border},formatter:{type:[Function,null],default:()=>t.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}})],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,t){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===t&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),a&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return S({},r(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{addStyle:r,addUnit:l,setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),k(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick((()=>{this.innerValue=a,this.valueChange()}))},valueChange(){const e=this.innerValue;this.$nextTick((()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),k(this,"change")}))},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,t,a,o,l,n){const r=w,s=_,f=g;return i(),u(f,{class:C(["u-textarea",n.textareaClass]),style:p([n.textareaStyle])},{default:d((()=>[c(r,{class:"u-textarea__field",value:l.innerValue,style:p({height:n.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":n.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,"confirm-type":e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:n.onFocus,onBlur:n.onBlur,onLinechange:n.onLinechange,onInput:n.onInput,onConfirm:n.onConfirm,onKeyboardheightchange:n.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(i(),u(s,{key:0,class:"u-textarea__count",style:p({"background-color":e.disabled?"transparent":"#fff"})},{default:d((()=>[h(m(l.innerValue.length)+"/"+m(e.maxlength),1)])),_:1},8,["style"])):y("v-if",!0)])),_:1},8,["class","style"])}],["__scopeId","data-v-50f91103"]]),J=W({__name:"Card",props:{title:{type:String,default:""},fontSize:{type:String,default:"30rpx"},cardStyle:{type:Object,default:()=>({})}},setup(e){const t=e;return(a,o)=>{const l=g;return i(),u(l,{class:"card",style:p(e.cardStyle)},{default:d((()=>[a.$slots.header||t.title?(i(),u(l,{key:0,class:"card__header"},{default:d((()=>[f(a.$slots,"header",{},void 0,!0),a.$slots.header?y("v-if",!0):(i(),u(l,{key:0,style:p({fontSize:t.fontSize})},{default:d((()=>[h(m(t.title),1)])),_:1},8,["style"]))])),_:3})):y("v-if",!0),c(l,{class:"card__content"},{default:d((()=>[f(a.$slots,"default",{},void 0,!0)])),_:3}),c(l,{class:"card__footer"},{default:d((()=>[f(a.$slots,"footer",{},void 0,!0)])),_:3})])),_:3},8,["style"])}}},[["__scopeId","data-v-491fa4e0"]]),Q=W({__name:"SingleChoice",props:{data:{type:Object},type:{type:Number},power:{type:Number}},emits:"select",setup(e,{emit:t}){const a=e,o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function l(){switch(a.type){case 1:return"单选题";case 2:return"多选题";case 3:return"问答题"}}function n(e="",t){if(e&&e.some((e=>e.id==t)))return"active"}return(e,r)=>{const s=g,p=U(x("u-textarea"),Z);return i(),u(s,{style:{}},{default:d((()=>[c(J,{cardStyle:{borderRadius:"12rpx"}},{default:d((()=>[c(s,null,{default:d((()=>[c(s,{style:{"margin-bottom":"20rpx"}},{default:d((()=>[h("题目类型："+m(l()),1)])),_:1}),c(s,{style:{"margin-bottom":"20rpx"}},{default:d((()=>[h(m(a.data.title),1)])),_:1}),1==a.data.type||2==a.data.type?(i(),u(s,{key:0},{default:d((()=>[(i(!0),b(v,null,B(a.data.options,((e,l)=>(i(),u(s,{key:l,onClick:o=>function(e,o,l){t("select",e,o,a.type,l)}(l,e.id,e.score),class:C(n(a.data.mySelect,e.id)),style:{padding:"24rpx 44rpx","margin-bottom":"20rpx",background:"#F6F6F6","border-radius":"15rpx",display:"flex",border:"1rpx solid #ddd"}},{default:d((()=>[h(m(o[l])+" ",1),c(s,{style:{padding:"0 40rpx"}},{default:d((()=>[h("|")])),_:1}),h(" "+m(e.option_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})):y("v-if",!0),3==a.data.type?(i(),u(s,{key:1},{default:d((()=>[c(p,{onBlur:r[0]||(r[0]=e=>{return o=a.data.result,void t("blur",o);var o}),style:{"background-color":"#f6f6f6"},modelValue:a.data.result,"onUpdate:modelValue":r[1]||(r[1]=e=>a.data.result=e),type:"textarea",placeholder:"请输入内容",border:"none",clearable:""},null,8,["modelValue"])])),_:1})):y("v-if",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ba83d784"]]),Y=W({__name:"answer",setup(e){const t=I({list:[],currentIndex:0}),a=I(!1),o=I(!1);function l(e,a,o,l){let n=P("submitInfo"),r=t.value.list[t.value.currentIndex],s=n.categories[P("current")].questions[t.value.currentIndex];1==o&&(r.mySelect=[{index:e,id:a}],s.options=[{id:a,score:l}]),2==o&&(r.mySelect||(r.mySelect=[]),r.mySelect&&r.mySelect.some((e=>e.id==a))?(r.mySelect=r.mySelect.filter((e=>e.id!==a)),s.options=s.options.filter((e=>e.id!==a))):(r.mySelect.push({index:e,id:a}),s.options.push({id:a,score:l}))),T("submitInfo",n)}function n(e){let a=P("submitInfo");a.categories[P("current")].questions[t.value.currentIndex].options=[{result:e}],T("submitInfo",a)}function r(){var e,a;return(null==(a=null==(e=t.value.list[t.value.currentIndex])?void 0:e.mySelect)?void 0:a.length)>0||t.value.list[t.value.currentIndex].result}function s(e){t.value.currentIndex=e.detail.current}function p(){return P("current")<P("info").categories.length-1}function f(){let e=P("submitInfo");O({title:"提交中",mask:!0}),N(e).then((e=>{j(),a.value=!0,1==P("info").web_site_survey_result_display&&(T("result",e.data),E({url:"/pages/result/result"}))}))}return q((e=>{t.value.list=P("info").categories[P("current")].questions})),(e,C)=>{const S=U(x("u-line-progress"),M),k=g,w=_,I=D,O=K,N=z,j=V,W=H,A=U(x("up-modal"),X);return i(),u(k,{class:"page"},{default:d((()=>[c(k,{style:{padding:"20rpx 0rpx 30rpx 30rpx",display:"flex","align-items":"center"}},{default:d((()=>[h(" 测试进度 "),c(k,{style:{width:"170rpx","margin-left":"10rpx"}},{default:d((()=>[c(S,{height:"8px",showText:!1,"inactive-color":"#9dd5e6",percentage:$(t).currentIndex/$(t).list.length*100,activeColor:"#0694e0"},null,8,["percentage"])])),_:1}),c(w,{style:{"font-size":"26rpx","padding-left":"38rpx","padding-right":"20rpx"}},{default:d((()=>[h(m($(t).currentIndex+1+"/"+$(t).list.length),1)])),_:1})])),_:1}),c(N,{onChange:s,current:$(t).currentIndex,style:{flex:"1",overflow:"auto"}},{default:d((()=>[(i(!0),b(v,null,B($(t).list,((t,a)=>(i(),u(O,{key:a},{default:d((()=>[1==t.type||2==t.type||3==t.type?(i(),u(I,{key:0,"scroll-y":"",style:{height:"100%"}},{default:d((()=>[c(Q,{onBlur:n,power:e.type,type:t.type,onSelect:l,data:t},null,8,["power","type","data"])])),_:2},1024)):y("v-if",!0)])),_:2},1024)))),128))])),_:1},8,["current"]),c(k,null,{default:d((()=>[c(A,{showConfirmButton:!1,show:$(o),title:$(a)?"提示":""},{default:d((()=>[$(a)?(i(),u(k,{key:1,class:"slot-content"},{default:d((()=>[c(W,{style:{width:"138rpx",height:"138rpx"},src:"/app/assets/submitSuccess-388aab3f.png",mode:"scaleToFill"}),c(k,{style:{"font-size":"28rpx",padding:"30rpx 0 60rpx","text-align":"center"}},{default:d((()=>[h("问卷已提交")])),_:1})])),_:1})):(i(),u(k,{key:0,class:"slot-content"},{default:d((()=>[c(k,{style:{"font-size":"28rpx",padding:"30rpx 0 60rpx","text-align":"center"}},{default:d((()=>[h("确定要提交吗？")])),_:1}),c(k,{style:{display:"flex","justify-content":"space-between"}},{default:d((()=>[c(j,{class:"btn",style:{background:"#EEEEEE",color:"#000"},onClick:C[0]||(C[0]=e=>o.value=!1)},{default:d((()=>[h("取消")])),_:1}),c(j,{class:"btn",style:{background:"#017AFD",color:"#fff"},onClick:f},{default:d((()=>[h("确定")])),_:1})])),_:1})])),_:1}))])),_:1},8,["show","title"])])),_:1}),c(G,{bottom:0,left:0,autoHeightStyle:{width:"100%"}},{default:d((()=>[c(k,{class:"btn_list"},{default:d((()=>[0!==$(t).currentIndex?(i(),u(j,{key:0,class:"btn",onClick:C[1]||(C[1]=e=>{t.value.currentIndex--})},{default:d((()=>[h(" 上一题 ")])),_:1})):y("v-if",!0),$(t).currentIndex!==$(t).list.length-1?(i(),u(j,{key:1,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:C[2]||(C[2]=e=>{r()?t.value.currentIndex<t.value.list.length-1&&t.value.currentIndex++:F({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 下一题 ")])),_:1})):y("v-if",!0),$(t).currentIndex==$(t).list.length-1&&p()?(i(),u(j,{key:2,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:C[3]||(C[3]=e=>{r()?(T("current",1*P("current")+1),E({url:"/pages/illustrate/illustrate"})):F({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 下一个测试量表 ")])),_:1})):y("v-if",!0),$(t).currentIndex!=$(t).list.length-1||p()?y("v-if",!0):(i(),u(j,{key:3,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:C[4]||(C[4]=e=>{r()?o.value=!0:F({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 提交 ")])),_:1}))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-1f466922"]]);export{Y as default};
