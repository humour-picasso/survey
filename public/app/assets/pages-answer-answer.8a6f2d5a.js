import{d as e,a as t,m as a,b as o,c as l,M as n,f as r,s,o as i,g as u,w as d,h as c,n as p,j as f,x as h,y as m,i as y,l as g,z as _,r as x,E as b,F as v,q as C,e as S,p as k,a0 as w,G as B,S as I,a1 as P,Z as $,X as F,K as T,W as E,$ as O,a2 as N,a3 as j,a4 as z,a5 as V,O as H,k as D,a6 as K,a7 as W}from"./index-5570dde8.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as A,b as R,c as L,d as q,e as G}from"./u-popup.85ab129d.js";import{_ as M}from"./AutoHeight.40b79ea7.js";const X=U({name:"u-line-progress",mixins:[a,o,e({props:{activeColor:{type:String,default:()=>t.lineProgress.activeColor},inactiveColor:{type:String,default:()=>t.lineProgress.color},percentage:{type:[String,Number],default:()=>t.lineProgress.inactiveColor},showText:{type:Boolean,default:()=>t.lineProgress.showText},height:{type:[String,Number],default:()=>t.lineProgress.height}}})],data:()=>({lineWidth:0}),watch:{percentage(e){this.resizeProgressWidth()}},computed:{progressStyle(){let e={};return e.width=this.lineWidth,e.backgroundColor=this.activeColor,e.height=l(this.height),e},innserPercentage(){return n(0,100,this.percentage)}},mounted(){this.init()},methods:{addStyle:r,addUnit:l,init(){s(20).then((()=>{this.resizeProgressWidth()}))},getProgressWidth(){return this.$uGetRect(".u-line-progress__background")},resizeProgressWidth(){this.getProgressWidth().then((e=>{const{width:t}=e;this.lineWidth=t*this.innserPercentage/100+"px"}))}}},[["render",function(e,t,a,o,l,n){const r=g,s=_;return i(),u(r,{class:"u-line-progress",style:p([n.addStyle(e.customStyle)])},{default:d((()=>[c(r,{class:"u-line-progress__background",ref:"u-line-progress__background",style:p([{backgroundColor:e.inactiveColor,height:n.addUnit(e.height)}])},null,8,["style"]),c(r,{class:"u-line-progress__line",style:p([n.progressStyle])},{default:d((()=>[f(e.$slots,"default",{},(()=>[e.showText&&e.percentage>=10?(i(),u(s,{key:0,class:"u-line-progress__text"},{default:d((()=>[h(m(n.innserPercentage+"%"),1)])),_:1})):y("v-if",!0)]),!0)])),_:3},8,["style"])])),_:3},8,["style"])}],["__scopeId","data-v-4a20372c"]]);const Z=U({name:"u-modal",mixins:[a,o,e({props:{show:{type:Boolean,default:()=>t.modal.show},title:{type:[String],default:()=>t.modal.title},content:{type:String,default:()=>t.modal.content},confirmText:{type:String,default:()=>t.modal.confirmText},cancelText:{type:String,default:()=>t.modal.cancelText},showConfirmButton:{type:Boolean,default:()=>t.modal.showConfirmButton},showCancelButton:{type:Boolean,default:()=>t.modal.showCancelButton},confirmColor:{type:String,default:()=>t.modal.confirmColor},cancelColor:{type:String,default:()=>t.modal.cancelColor},buttonReverse:{type:Boolean,default:()=>t.modal.buttonReverse},zoom:{type:Boolean,default:()=>t.modal.zoom},asyncClose:{type:Boolean,default:()=>t.modal.asyncClose},closeOnClickOverlay:{type:Boolean,default:()=>t.modal.closeOnClickOverlay},negativeTop:{type:[String,Number],default:()=>t.modal.negativeTop},width:{type:[String,Number],default:()=>t.modal.width},confirmButtonShape:{type:String,default:()=>t.modal.confirmButtonShape}}})],data:()=>({loading:!1}),watch:{show(e){e&&this.loading&&(this.loading=!1)}},emits:["confirm","cancel","close"],methods:{addUnit:l,confirmHandler(){this.asyncClose&&(this.loading=!0),this.$emit("confirm")},cancelHandler(){this.$emit("cancel")},clickHandler(){this.closeOnClickOverlay&&this.$emit("close")}}},[["render",function(e,t,a,o,l,n){const r=_,s=g,S=A(x("u-line"),R),k=A(x("u-loading-icon"),L),w=A(x("u-popup"),q);return i(),u(w,{mode:"center",zoom:e.zoom,show:e.show,class:C([e.customClass]),customStyle:{borderRadius:"6px",overflow:"hidden",marginTop:`-${n.addUnit(e.negativeTop)}`},closeOnClickOverlay:e.closeOnClickOverlay,safeAreaInsetBottom:!1,duration:400,onClick:n.clickHandler},{default:d((()=>[c(s,{class:"u-modal",style:p({width:n.addUnit(e.width)})},{default:d((()=>[e.title?(i(),u(r,{key:0,class:"u-modal__title"},{default:d((()=>[h(m(e.title),1)])),_:1})):y("v-if",!0),c(s,{class:"u-modal__content",style:p({paddingTop:(e.title?12:25)+"px"})},{default:d((()=>[f(e.$slots,"default",{},(()=>[c(r,{class:"u-modal__content__text"},{default:d((()=>[h(m(e.content),1)])),_:1})]),!0)])),_:3},8,["style"]),e.$slots.confirmButton?(i(),u(s,{key:1,class:"u-modal__button-group--confirm-button"},{default:d((()=>[f(e.$slots,"confirmButton",{},void 0,!0)])),_:3})):(i(),b(v,{key:2},[c(S),c(s,{class:"u-modal__button-group",style:p({flexDirection:e.buttonReverse?"row-reverse":"row"})},{default:d((()=>[e.showCancelButton?(i(),u(s,{key:0,class:C(["u-modal__button-group__wrapper u-modal__button-group__wrapper--cancel",[e.showCancelButton&&!e.showConfirmButton&&"u-modal__button-group__wrapper--only-cancel"]]),"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover",onClick:n.cancelHandler},{default:d((()=>[c(r,{class:"u-modal__button-group__wrapper__text",style:p({color:e.cancelColor})},{default:d((()=>[h(m(e.cancelText),1)])),_:1},8,["style"])])),_:1},8,["class","onClick"])):y("v-if",!0),e.showConfirmButton&&e.showCancelButton?(i(),u(S,{key:1,direction:"column"})):y("v-if",!0),e.showConfirmButton?(i(),u(s,{key:2,class:C(["u-modal__button-group__wrapper u-modal__button-group__wrapper--confirm",[!e.showCancelButton&&e.showConfirmButton&&"u-modal__button-group__wrapper--only-confirm"]]),"hover-stay-time":150,"hover-class":"u-modal__button-group__wrapper--hover",onClick:n.confirmHandler},{default:d((()=>[l.loading?(i(),u(k,{key:0})):(i(),u(r,{key:1,class:"u-modal__button-group__wrapper__text",style:p({color:e.confirmColor})},{default:d((()=>[h(m(e.confirmText),1)])),_:1},8,["style"]))])),_:1},8,["class","onClick"])):y("v-if",!0)])),_:1},8,["style"])],64))])),_:3},8,["style"])])),_:3},8,["zoom","show","class","customStyle","closeOnClickOverlay","onClick"])}],["__scopeId","data-v-8d548a8a"]]);const J=U({name:"u-textarea",mixins:[a,o,e({props:{value:{type:[String,Number],default:()=>t.textarea.value},modelValue:{type:[String,Number],default:()=>t.textarea.value},placeholder:{type:[String,Number],default:()=>t.textarea.placeholder},placeholderClass:{type:String,default:()=>t.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>t.input.placeholderStyle},height:{type:[String,Number],default:()=>t.textarea.height},confirmType:{type:String,default:()=>t.textarea.confirmType},disabled:{type:Boolean,default:()=>t.textarea.disabled},count:{type:Boolean,default:()=>t.textarea.count},focus:{type:Boolean,default:()=>t.textarea.focus},autoHeight:{type:Boolean,default:()=>t.textarea.autoHeight},fixed:{type:Boolean,default:()=>t.textarea.fixed},cursorSpacing:{type:Number,default:()=>t.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>t.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>t.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>t.textarea.selectionStart},selectionEnd:{type:Number,default:()=>t.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>t.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>t.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>t.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>t.textarea.maxlength},border:{type:String,default:()=>t.textarea.border},formatter:{type:[Function,null],default:()=>t.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}})],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,t){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===t&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),a&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return S({},r(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{addStyle:r,addUnit:l,setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),k(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick((()=>{this.innerValue=a,this.valueChange()}))},valueChange(){const e=this.innerValue;this.$nextTick((()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),k(this,"change")}))},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,t,a,o,l,n){const r=w,s=_,f=g;return i(),u(f,{class:C(["u-textarea",n.textareaClass]),style:p([n.textareaStyle])},{default:d((()=>[c(r,{class:"u-textarea__field",value:l.innerValue,style:p({height:n.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":n.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,"confirm-type":e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:n.onFocus,onBlur:n.onBlur,onLinechange:n.onLinechange,onInput:n.onInput,onConfirm:n.onConfirm,onKeyboardheightchange:n.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(i(),u(s,{key:0,class:"u-textarea__count",style:p({"background-color":e.disabled?"transparent":"#fff"})},{default:d((()=>[h(m(l.innerValue.length)+"/"+m(e.maxlength),1)])),_:1},8,["style"])):y("v-if",!0)])),_:1},8,["class","style"])}],["__scopeId","data-v-50f91103"]]),Q=U({__name:"Card",props:{title:{type:String,default:""},fontSize:{type:String,default:"30rpx"},cardStyle:{type:Object,default:()=>({})}},setup(e){const t=e;return(a,o)=>{const l=g;return i(),u(l,{class:"card",style:p(e.cardStyle)},{default:d((()=>[a.$slots.header||t.title?(i(),u(l,{key:0,class:"card__header"},{default:d((()=>[f(a.$slots,"header",{},void 0,!0),a.$slots.header?y("v-if",!0):(i(),u(l,{key:0,style:p({fontSize:t.fontSize})},{default:d((()=>[h(m(t.title),1)])),_:1},8,["style"]))])),_:3})):y("v-if",!0),c(l,{class:"card__content"},{default:d((()=>[f(a.$slots,"default",{},void 0,!0)])),_:3}),c(l,{class:"card__footer"},{default:d((()=>[f(a.$slots,"footer",{},void 0,!0)])),_:3})])),_:3},8,["style"])}}},[["__scopeId","data-v-491fa4e0"]]),Y=U({__name:"SingleChoice",props:{data:{type:Object},type:{type:Number},power:{type:Number}},emits:"select",setup(e,{emit:t}){const a=e,o=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function l(){switch(a.type){case 1:return"单选题";case 2:return"多选题";case 3:return"问答题"}}function n(e="",t){if(e&&e.some((e=>e.id==t)))return"active"}return(e,r)=>{const s=g,p=A(x("u-textarea"),J);return i(),u(s,{style:{}},{default:d((()=>[c(Q,{cardStyle:{borderRadius:"12rpx"}},{default:d((()=>[c(s,null,{default:d((()=>[c(s,{style:{"margin-bottom":"20rpx"}},{default:d((()=>[h("题目类型："+m(l()),1)])),_:1}),c(s,{style:{"margin-bottom":"20rpx"}},{default:d((()=>[h(m(a.data.title),1)])),_:1}),1==a.data.type||2==a.data.type?(i(),u(s,{key:0},{default:d((()=>[(i(!0),b(v,null,B(a.data.options,((e,l)=>(i(),u(s,{key:l,onClick:o=>function(e,o,l){t("select",e,o,a.type,l)}(l,e.id,e.score),class:C(n(a.data.mySelect,e.id)),style:{padding:"24rpx 44rpx","margin-bottom":"20rpx",background:"#F6F6F6","border-radius":"15rpx",display:"flex",border:"1rpx solid #ddd"}},{default:d((()=>[h(m(o[l])+" ",1),c(s,{style:{padding:"0 40rpx"}},{default:d((()=>[h("|")])),_:1}),h(" "+m(e.option_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})):y("v-if",!0),3==a.data.type?(i(),u(s,{key:1},{default:d((()=>[c(p,{onBlur:r[0]||(r[0]=e=>{return o=a.data.result,void t("blur",o);var o}),style:{"background-color":"#f6f6f6"},modelValue:a.data.result,"onUpdate:modelValue":r[1]||(r[1]=e=>a.data.result=e),type:"textarea",placeholder:"请输入内容",border:"none",clearable:""},null,8,["modelValue"])])),_:1})):y("v-if",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ba83d784"]]),ee=U({__name:"answer",setup(e){const t=I(0);P((()=>0==t.value));const a=I({list:[],currentIndex:0});I({type:"",num:"",classid:""});const o=I(!1),l=I(!1);function n(e,t,o,l){let n=$("submitInfo"),r=a.value.list[a.value.currentIndex],s=n.categories[$("current")].questions[a.value.currentIndex];1==o&&(r.mySelect=[{index:e,id:t}],s.options=[{id:t,score:l}]),2==o&&(r.mySelect||(r.mySelect=[]),r.mySelect&&r.mySelect.some((e=>e.id==t))?(r.mySelect=r.mySelect.filter((e=>e.id!==t)),s.options=s.options.filter((e=>e.id!==t))):(r.mySelect.push({index:e,id:t}),s.options.push({id:t,score:l}))),E("submitInfo",n)}function r(e){let t=$("submitInfo");t.categories[$("current")].questions[a.value.currentIndex].options=[{result:e}],E("submitInfo",t)}function s(){var e,t;return(null==(t=null==(e=a.value.list[a.value.currentIndex])?void 0:e.mySelect)?void 0:t.length)>0||a.value.list[a.value.currentIndex].result}function p(e){a.value.currentIndex=e.detail.current}function f(){return $("current")<$("info").categories.length-1}function C(){let e=$("submitInfo");N({title:"提交中",mask:!0}),j(e).then((e=>{z(),o.value=!0,1==$("info").web_site_survey_result_display&&(E("result",e.data),O({url:"/pages/result/result"}))}))}return G((e=>{a.value.list=$("info").categories[$("current")].questions})),(e,S)=>{const k=A(x("u-line-progress"),X),w=g,I=_,P=K,N=W,j=V,z=H,U=D,R=A(x("up-modal"),Z);return i(),u(w,{class:"page"},{default:d((()=>[c(w,{style:{padding:"20rpx 0rpx 30rpx 30rpx",display:"flex","align-items":"center"}},{default:d((()=>[h(" 测试进度 "),c(w,{style:{width:"170rpx","margin-left":"10rpx"}},{default:d((()=>[c(k,{height:"8px",showText:!1,"inactive-color":"#9dd5e6",percentage:F(a).currentIndex/F(a).list.length*100,activeColor:"#0694e0"},null,8,["percentage"])])),_:1}),c(I,{style:{"font-size":"26rpx","padding-left":"38rpx","padding-right":"20rpx"}},{default:d((()=>[h(m(F(a).currentIndex+1+"/"+F(a).list.length),1)])),_:1})])),_:1}),c(j,{onChange:p,current:F(a).currentIndex,style:{flex:"1",overflow:"auto"}},{default:d((()=>[(i(!0),b(v,null,B(F(a).list,((e,a)=>(i(),u(N,{key:a},{default:d((()=>[1==e.type||2==e.type||3==e.type?(i(),u(P,{key:0,"scroll-y":"",style:{height:"100%"}},{default:d((()=>[c(Y,{onBlur:r,power:F(t),type:e.type,onSelect:n,data:e},null,8,["power","type","data"])])),_:2},1024)):y("v-if",!0)])),_:2},1024)))),128))])),_:1},8,["current"]),c(w,null,{default:d((()=>[c(R,{showConfirmButton:!1,show:F(l),title:F(o)?"提示":""},{default:d((()=>[F(o)?(i(),u(w,{key:1,class:"slot-content"},{default:d((()=>[c(U,{style:{width:"138rpx",height:"138rpx"},src:"/app/assets/submitSuccess-388aab3f.png",mode:"scaleToFill"}),c(w,{style:{"font-size":"28rpx",padding:"30rpx 0 60rpx","text-align":"center"}},{default:d((()=>[h("问卷已提交")])),_:1})])),_:1})):(i(),u(w,{key:0,class:"slot-content"},{default:d((()=>[c(w,{style:{"font-size":"28rpx",padding:"30rpx 0 60rpx","text-align":"center"}},{default:d((()=>[h("确定要提交吗？")])),_:1}),c(w,{style:{display:"flex","justify-content":"space-between"}},{default:d((()=>[c(z,{class:"btn",style:{background:"#EEEEEE",color:"#000"},onClick:S[0]||(S[0]=e=>l.value=!1)},{default:d((()=>[h("取消")])),_:1}),c(z,{class:"btn",style:{background:"#017AFD",color:"#fff"},onClick:C},{default:d((()=>[h("确定")])),_:1})])),_:1})])),_:1}))])),_:1},8,["show","title"])])),_:1}),c(M,{bottom:0,left:0,autoHeightStyle:{width:"100%"}},{default:d((()=>[c(w,{class:"btn_list"},{default:d((()=>[0!==F(a).currentIndex?(i(),u(z,{key:0,class:"btn",onClick:S[1]||(S[1]=e=>{a.value.currentIndex--})},{default:d((()=>[h(" 上一题 ")])),_:1})):y("v-if",!0),F(a).currentIndex!==F(a).list.length-1?(i(),u(z,{key:1,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:S[2]||(S[2]=e=>{s()?a.value.currentIndex<a.value.list.length-1&&a.value.currentIndex++:T({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 下一题 ")])),_:1})):y("v-if",!0),F(a).currentIndex==F(a).list.length-1&&f()?(i(),u(z,{key:2,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:S[3]||(S[3]=e=>{s()?(E("current",1*$("current")+1),O({url:"/pages/illustrate/illustrate"})):T({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 下一个测试量表 ")])),_:1})):y("v-if",!0),F(a).currentIndex!=F(a).list.length-1||f()?y("v-if",!0):(i(),u(z,{key:3,style:{background:"#017AFD",color:"#fff"},class:"btn",onClick:S[4]||(S[4]=e=>{s()?l.value=!0:T({title:"请选择先答题",icon:"none"})})},{default:d((()=>[h(" 提交 ")])),_:1}))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-1514d35a"]]);export{ee as default};
